<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: login-page.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: login-page.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @file js/login-page.js
 * @description يحتوي هذا الملف على كل المنطق البرمجي الخاص بصفحة login.html.
 *
 * يشمل ذلك:
 * - التعامل مع نموذج تسجيل الدخول.
 * - تحديث الواجهة للمستخدم المسجل دخوله.
 * - عرض لوحة تحكم المسؤول (Admin) لإدارة المستخدمين.
 * - عرض لوحة تحكم البائع (Seller) لإدارة المنتجات.
 * - عرض وإدارة سلة المشتريات والمشتريات السابقة.
 * - عرض النوافذ المنبثقة (Modals) لإضافة/تعديل المنتجات والبيانات الشخصية.
 */

/**
 * @description تحديث واجهة المستخدم لتعكس حالة تسجيل الدخول،
 *   حيث تخفي نموذج تسجيل الدخول وتظهر حاوية المستخدم المسجل،
 *   مع تخصيص الأزرار والإجراءات بناءً على دور المستخدم (ضيف، عميل، بائع، مسؤول).
 * @function updateViewForLoggedInUser
 * @param {object} user - كائن المستخدم المسجل دخوله، يحتوي على `username`, `is_guest`, `user_key`, `is_seller`, وغيرها.
 * @returns {void}
 * @see logout
 * @see showCartModal
 * @see showPurchasesModal
 * @see showEditProfileModal
 * @see showAddProductModal
 * @see showMyProducts
 * @see showNotificationsModal
 * @see showSalesMovementModal
 * @see adminPhoneNumbers
 */
function updateViewForLoggedInUser(user) {
  // إخفاء حاوية نموذج تسجيل الدخول
  const loginFormWrapper = document.getElementById("login-form-wrapper");
  if (loginFormWrapper) {
    loginFormWrapper.style.display = "none";
  }

  // إظهار حاوية المستخدم المسجل
  const loggedInContainer = document.getElementById("logged-in-container");
  loggedInContainer.style.display = "flex";
  document.getElementById(
    "welcome-message"
  ).textContent = `أهلاً بك، ${user.username}`;

  // ✅ إصلاح شامل: إعادة هيكلة المنطق بالكامل
  if (user.is_guest) {
    // --- منطق المستخدم الضيف ---
    // إخفاء كل المجموعات أولاً
    document.getElementById("admin-actions").style.display = "none";
    document.getElementById("seller-actions").style.display = "none";
    document.getElementById("reports-actions").style.display = "none"; // ✅ جديد: إخفاء مجموعة التقارير
    document.getElementById("customer-actions").style.display = "none";

    // إظهار مجموعة الإعدادات التي تحتوي على زر تسجيل الخروج فقط
    const userActions = document.getElementById("user-actions");
    userActions.style.display = "block";

    // إخفاء الأزرار غير المرغوب فيها داخل هذه المجموعة
    const editProfileBtn = document.getElementById("edit-profile-btn");
    if (editProfileBtn) editProfileBtn.style.display = "none";

    // ربط حدث تسجيل الخروج
    document.getElementById("logout-btn-alt").addEventListener("click", logout);

  } else {
    // --- منطق المستخدم المسجل (غير الضيف) ---
    // إضافة وظيفة لزر تسجيل الخروج
    document.getElementById("logout-btn-alt").addEventListener("click", logout);

    // إظهار حاوية إجراءات العميل (السلة والمشتريات)
    const customerActions = document.getElementById("customer-actions");
    customerActions.style.display = "block";
    document.getElementById("view-cart-btn").addEventListener("click", showCartModal);
    document.getElementById("view-purchases-btn").addEventListener("click", () => showPurchasesModal(user.user_key));

    // إظهار حاوية الإجراءات العامة (تعديل البيانات وتسجيل الخروج)
    const userActions = document.getElementById("user-actions");
    userActions.style.display = "block";
    document.getElementById("edit-profile-btn").addEventListener("click", () => showEditProfileModal(user));

    // ✅ تعديل: التحقق مما إذا كان المستخدم بائعًا (1) أو مسؤولاً (adminPhoneNumbers)
    if (user.is_seller === 1 || adminPhoneNumbers.includes(user.phone)) {
      const sellerActions = document.getElementById("seller-actions");
      sellerActions.style.display = "block";
      document.getElementById("add-product-btn").addEventListener("click", showAddProductModal);
      document.getElementById("view-my-products-btn").addEventListener("click", () => showMyProducts(user.user_key));
    }

    // التحقق مما إذا كان المستخدم "خدمة توصيل"
    if (user.is_seller === 2) {
      const deliveryActions = document.getElementById("delivery-actions");
      deliveryActions.style.display = "block";
      // يمكنك ربط الأحداث هنا لأزرار خدمة التوصيل في المستقبل
      // document.getElementById("view-delivery-requests-btn").addEventListener("click", showDeliveryRequests);
    }

    // ✅ تعديل: التحقق مما إذا كان المستخدم مسؤولاً (adminPhoneNumbers)
    if (adminPhoneNumbers.includes(user.phone)) {
      const adminActions = document.getElementById("admin-actions");
      adminActions.style.display = "block";
      const adminPanelButton = document.createElement("a");
      adminPanelButton.id = "admin-panel-btn";
      adminPanelButton.href = "admin.html";
      adminPanelButton.className = "button logout-btn-small";
      adminPanelButton.innerHTML = '&lt;i class="fas fa-user-shield">&lt;/i> لوحة تحكم المسؤول';
      const adminButtonRow = adminActions.querySelector(".button-row");
      // التأكد من عدم إضافة الزر أكثر من مرة
      if (!document.getElementById("admin-panel-btn")) {
        adminButtonRow.appendChild(adminPanelButton);
      }
    }

    // ✅ جديد: إظهار زر "سجل الإشعارات" للمستخدمين المؤهلين
    if (isUserEligibleForNotifications(user)) {
      const viewNotificationsBtn = document.getElementById("view-notifications-log-btn");
      if (viewNotificationsBtn) {
        viewNotificationsBtn.style.display = 'inline-flex';
        // التأكد من وجود الدالة قبل ربط الحدث
        // ✅ إصلاح: يجب استدعاء الدالة الوسيطة showNotificationsModal للتحقق من الصلاحيات أولاً.
        if (typeof showNotificationsModal === 'function') {
          viewNotificationsBtn.addEventListener("click", showNotificationsModal);
        }
      }
    }

    // ✅ جديد: إظهار زر "حركة المشتريات" للمسؤول أو البائع أو خدمة التوصيل
    // ✅ تعديل: تحديث الشرط ليشمل المسؤول (adminPhoneNumbers)
    if (user.is_seller === 1 || user.is_seller === 2 || adminPhoneNumbers.includes(user.phone)) {
      const reportsActions = document.getElementById("reports-actions");
      reportsActions.style.display = "block";
      // ✅ تفعيل: ربط حدث النقر بالزر 
      document.getElementById("view-sales-movement-btn").addEventListener("click", () => showSalesMovementModal(user.user_key));
    }
  }
}

// عند تحميل محتوى الصفحة بالكامل، يتم تنفيذ هذا الكود
document.addEventListener("DOMContentLoaded", () => {
  const loggedInUser = localStorage.getItem("loggedInUser");
  // ✅ إصلاح: تهيئة مستمع الإشعارات فورًا عند تحميل الصفحة للمستخدم المسجل دخوله.
  // ✅ حل بديل: استدعاء الدالة الجديدة المخصصة للإشعارات.
  if (typeof initializeNotifications === 'function') initializeNotifications();
  if (loggedInUser) {
    const user = JSON.parse(loggedInUser);
    updateViewForLoggedInUser(user);
  }

  // ربط الأحداث الخاصة بنموذج تسجيل الدخول
  const form = document.getElementById("login-form");
  if (!form) return; // الخروج إذا لم يكن نموذج تسجيل الدخول موجودًا في الصفحة

  const phoneInput = document.getElementById("phone");

  /**
   * @description تعرض رسالة خطأ تحت حقل الإدخال المحدد وتضيف فئة خطأ إلى حقل الإدخال.
   * @function showError
   * @param {HTMLElement} input - عنصر الإدخال (input field) الذي حدث فيه الخطأ.
   * @param {string} message - رسالة الخطأ المراد عرضها.
   * @returns {void}
   */
  const showError = (input, message) => {
    const errorDiv = document.getElementById(`${input.id}-error`);
    input.classList.add("input-error");
    errorDiv.textContent = message;
  };

  /**
   * @description تمسح رسالة الخطأ من تحت حقل الإدخال المحدد وتزيل فئة الخطأ.
   * @function clearError
   * @param {HTMLElement} input - عنصر الإدخال (input field) الذي حدث فيه الخطأ.
   * @returns {void}
   */
  const clearError = (input) => {
    const errorDiv = document.getElementById(`${input.id}-error`);
    input.classList.remove("input-error");
    errorDiv.textContent = "";
  };

  // إضافة مستمع لحدث الإدخال لتنقية رقم الهاتف في الوقت الفعلي
  phoneInput.addEventListener("input", function (e) {
    // ✅ تحسين: استخدام دالة normalizeDigits الموحدة من utils.js
    const normalized = normalizeDigits(e.target.value);
    // إزالة أي حرف ليس رقمًا (0-9) بعد التحويل
    e.target.value = normalized.replace(/[^0-9]/g, "");
  });

  // إضافة مستمع لحدث الإرسال للنموذج
  form.addEventListener("submit", async function (e) {
    console.log('%c[Login Page] تم الضغط على زر تسجيل الدخول.', 'color: blue; font-weight: bold;');
    e.preventDefault(); // منع الإرسال الافتراضي للنموذج
    let isValid = true;

    // التحقق من صحة رقم الهاتف
    clearError(phoneInput);
    const phoneValue = phoneInput.value.trim();
    if (phoneValue === "") {
      showError(phoneInput, "رقم الهاتف مطلوب.");
      isValid = false;
    } else if (phoneValue.length &lt; 11) {
      showError(phoneInput, "رقم الهاتف يجب ألا يقل عن 11 رقمًا.");
      isValid = false;
    }

    if (isValid) {
      console.log('[Login Page] النموذج صالح، جاري التحقق من المستخدم...');
      // إظهار رسالة تحميل باستخدام SweetAlert2
      Swal.fire({
        title: "جاري تسجيل الدخول...",
        text: "الرجاء الانتظار قليلاً.",
        allowOutsideClick: false,
        didOpen: () => {
          Swal.showLoading();
        },
      });

      const initialCheck = await getUserByPhone(phoneValue);

      if (initialCheck &amp;&amp; initialCheck.passwordRequired) {
        console.log('[Login Page] الحساب يتطلب كلمة مرور.');
        // إذا كان الحساب يتطلب كلمة مرور
        Swal.close(); // إغلاق رسالة التحميل
        const { value: passwordResult } = await Swal.fire({
          title: 'التحقق من الهوية',
          html: `
            &lt;div class="swal-password-prompt">
              &lt;i class="fas fa-shield-alt swal-password-prompt-icon">&lt;/i>
              &lt;p class="swal-password-prompt-text">هذا الحساب محمي بكلمة مرور&lt;/p>
              &lt;div class="swal2-password-container">
                &lt;input type="password" id="swal-password-input" class="swal2-input" placeholder="ادخل كلمة المرور">
                &lt;i class="fas fa-eye swal2-password-toggle-icon" id="swal-toggle-password">&lt;/i>
              &lt;/div>
            &lt;/div>
          `,
          showCancelButton: true,
          confirmButtonText: 'تسجيل الدخول',
          cancelButtonText: 'إلغاء',
          showLoaderOnConfirm: true,
          didOpen: () => {
            const passwordInput = document.getElementById('swal-password-input');
            const toggleIcon = document.getElementById('swal-toggle-password');
            passwordInput.focus();
            toggleIcon.addEventListener('click', () => {
              const isPassword = passwordInput.type === 'password';
              passwordInput.type = isPassword ? 'text' : 'password';
              toggleIcon.classList.toggle('fa-eye');
              toggleIcon.classList.toggle('fa-eye-slash');
            });
          },
          preConfirm: async (password) => {
            const passwordInput = document.getElementById('swal-password-input');
            let passwordValue = passwordInput.value;

            if (!passwordValue) {
              Swal.showValidationMessage(`كلمة المرور لا يمكن أن تكون فارغة`);
              return;
            }
            // ✅ جديد: استخدام normalizeDigits لتحويل أي أرقام هندية في كلمة المرور
            passwordValue = normalizeDigits(passwordValue);
            const verificationResult = await verifyUserPassword(phoneValue, passwordValue);
            if (verificationResult.error) {
              Swal.showValidationMessage(`خطأ: ${verificationResult.error}`);
              return;
            }
            return verificationResult;
          },
          allowOutsideClick: () => !Swal.isLoading()
        });
        
        if (passwordResult) { // passwordResult هنا هو كائن المستخدم الكامل بعد التحقق الناجح
          console.log('[Login Page] التحقق من كلمة المرور نجح. جاري استدعاء handleLoginSuccess...');
          handleLoginSuccess(passwordResult);
        }

      } else if (initialCheck) {
        console.log('[Login Page] تسجيل دخول ناجح (بدون كلمة مرور). جاري استدعاء handleLoginSuccess...');
        // تسجيل دخول ناجح بدون كلمة مرور
        handleLoginSuccess(initialCheck);
      } else {
        console.error('[Login Page] المستخدم غير موجود.');
        // المستخدم غير موجود
        Swal.close();
        showError(phoneInput, "هذا الرقم غير مسجل. هل تريد إنشاء حساب جديد؟");
      }
    }
  });

  // ربط الحدث برابط "الدخول كضيف"
  const guestLoginBtn = document.getElementById('guest-login-btn');
  if (guestLoginBtn) {
    guestLoginBtn.addEventListener('click', handleGuestLogin);
  }
});

/**
 * @description يتعامل مع الإجراءات التي تحدث بعد تسجيل دخول ناجح للمستخدم،
 *   بما في ذلك حفظ بيانات المستخدم في LocalStorage، تهيئة إشعارات FCM إذا كان المستخدم مؤهلاً،
 *   تحديث الواجهة، وعرض رسالة ترحيب مع خيار الانتقال للصفحة الرئيسية.
 * @function handleLoginSuccess
 * @param {object} user - كائن المستخدم المسجل دخوله.
 * @returns {Promise&lt;void>} - وعد (Promise) لا يُرجع قيمة عند الاكتمال.
 * @see isUserEligibleForNotifications
 * @see setupFCM
 * @see askForNotificationPermission
 * @see updateViewForLoggedInUser
 * @see updateCartBadge
 */
async function handleLoginSuccess(user) {
  console.log('%c[Login Page] دخلنا دالة handleLoginSuccess. بيانات المستخدم:', 'color: green;', user);
  localStorage.setItem("loggedInUser", JSON.stringify(user));

  // ✅ تعديل: استدعاء setupFCM() فقط إذا كان المستخدم مؤهلاً (مسؤول، بائع، خدمة توصيل).
  // isUserEligibleForNotifications معرفة في auth.js
  if (typeof isUserEligibleForNotifications === 'function' &amp;&amp; isUserEligibleForNotifications(user)) {
    console.log('[Login Page] المستخدم مؤهل، جاري استدعاء setupFCM() الآن...');
    if (typeof setupFCM === 'function') {
     await setupFCM();
      await askForNotificationPermission();
    }
  } else {
    console.log('[Login Page] المستخدم غير مؤهل للإشعارات، تم تخطي استدعاء setupFCM().');
  }
  updateViewForLoggedInUser(user);
  if (window.updateCartBadge) window.updateCartBadge();



  Swal.fire({
    icon: "success",
    title: `أهلاً بك، ${user.username}`,
    text: "هل تود الانتقال إلى الصفحة الرئيسية؟",
    showCancelButton: true,
    confirmButtonText: "موافق",
    cancelButtonText: "لا",
  }).then((result) => {
    
    if (result.isConfirmed) {
      window.location.href = "index.html";
    }
  });
}

/**
 * @description تطلب إذن الإشعارات من النظام الأصلي (Native) إذا كان التطبيق يعمل ضمن بيئة Android،
 *   وذلك باستخدام واجهة `window.Android` المعرفة.
 * @function askForNotificationPermission
 * @returns {Promise&lt;void>} - وعد (Promise) لا يُرجع قيمة عند الاكتمال.
 */
async function askForNotificationPermission() {
  // التحقق من وجود الكائن 'Android' للتأكد من أن الكود يعمل داخل تطبيق أندرويد
  if (window.Android &amp;&amp; typeof window.Android.requestNotificationPermission === 'function') {
    console.log("Calling native function to request notification permission...");
    window.Android.requestNotificationPermission();
  } else {
    console.log("Android interface not available.");
  }
}

/**
 * @description يعالج عملية تسجيل الدخول كضيف، حيث يقوم بإنشاء كائن مستخدم ضيف وحفظه في LocalStorage،
 *   ثم يعرض رسالة ترحيب ويُعيد توجيه المستخدم إلى الصفحة الرئيسية.
 * @function handleGuestLogin
 * @param {Event} event - كائن الحدث لمنع السلوك الافتراضي للرابط (مثل إعادة تحميل الصفحة).
 * @returns {void}
 */
function handleGuestLogin(event) {
  event.preventDefault(); // منع الرابط من تحديث الصفحة
  console.log('[Auth] Logging in as a guest.');
  
  // إنشاء كائن مستخدم ضيف
  const guestUser = {
    username: 'ضيف',
    is_guest: true,
    user_key: 'guest_user' // مفتاح خاص للضيف
  };

  // حفظ بيانات الضيف في localStorage
  localStorage.setItem('loggedInUser', JSON.stringify(guestUser));

  // عرض رسالة ترحيب وتوجيه المستخدم
  Swal.fire({
    title: 'أهلاً بك كضيف!',
    text: 'يمكنك الآن تصفح المنتجات. ستحتاج إلى تسجيل الدخول لحفظ سلتك وإتمام الشراء.',
    icon: 'success',
    showConfirmButton: true,
    confirmButtonText: 'موافق'
  }).then((result) => {
    // توجيه المستخدم فقط بعد الضغط على زر "موافق"
    if (result.isConfirmed) {
      window.location.href = 'index.html';
    }
  });
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#CONNECTION_CHECK_INTERVAL">CONNECTION_CHECK_INTERVAL</a></li><li><a href="global.html#DB_NAME">DB_NAME</a></li><li><a href="global.html#DB_VERSION">DB_VERSION</a></li><li><a href="global.html#NOTIFICATIONS_STORE">NOTIFICATIONS_STORE</a></li><li><a href="global.html#ORDER_STATUSES">ORDER_STATUSES</a></li><li><a href="global.html#ORDER_STATUS_MAP">ORDER_STATUS_MAP</a></li><li><a href="global.html#SERVICE_CATEGORY_NoPrice_ID">SERVICE_CATEGORY_NoPrice_ID</a></li><li><a href="global.html#addNotificationLog">addNotificationLog</a></li><li><a href="global.html#addProduct">addProduct</a></li><li><a href="global.html#addRecord">addRecord</a></li><li><a href="global.html#addToCart">addToCart</a></li><li><a href="global.html#addUpdate">addUpdate</a></li><li><a href="global.html#addUser">addUser</a></li><li><a href="global.html#adminPhoneNumbers">adminPhoneNumbers</a></li><li><a href="global.html#apiFetch">apiFetch</a></li><li><a href="global.html#applyFilters">applyFilters</a></li><li><a href="global.html#askForNotificationPermission">askForNotificationPermission</a></li><li><a href="global.html#baseURL">baseURL</a></li><li><a href="global.html#buildSlider">buildSlider</a></li><li><a href="global.html#checkAdminStatus">checkAdminStatus</a></li><li><a href="global.html#checkAndDisplayNotificationStatus">checkAndDisplayNotificationStatus</a></li><li><a href="global.html#checkImage">checkImage</a></li><li><a href="global.html#checkInternetConnection">checkInternetConnection</a></li><li><a href="global.html#checkLoginStatus">checkLoginStatus</a></li><li><a href="global.html#clearCart">clearCart</a></li><li><a href="global.html#clearError">clearError</a></li><li><a href="global.html#clearNotificationLogs">clearNotificationLogs</a></li><li><a href="global.html#createOrder">createOrder</a></li><li><a href="global.html#createStatusTimelineHTML">createStatusTimelineHTML</a></li><li><a href="global.html#dbPromise">dbPromise</a></li><li><a href="global.html#debounce">debounce</a></li><li><a href="global.html#deleteProduct">deleteProduct</a></li><li><a href="global.html#deleteProductAndImages">deleteProductAndImages</a></li><li><a href="global.html#deleteUser">deleteUser</a></li><li><a href="global.html#displaySearchResults">displaySearchResults</a></li><li><a href="global.html#displayUsers">displayUsers</a></li><li><a href="global.html#fetchUsers">fetchUsers</a></li><li><a href="global.html#filterMyProducts">filterMyProducts</a></li><li><a href="global.html#generateCartItemHTML">generateCartItemHTML</a></li><li><a href="global.html#generateNotificationLogItemHTML">generateNotificationLogItemHTML</a></li><li><a href="global.html#generateOrderKey">generateOrderKey</a></li><li><a href="global.html#generateProductCardHTML">generateProductCardHTML</a></li><li><a href="global.html#generatePurchaseItemHTML">generatePurchaseItemHTML</a></li><li><a href="global.html#generateSalesMovementItemHTML">generateSalesMovementItemHTML</a></li><li><a href="global.html#generateUserCardHTML">generateUserCardHTML</a></li><li><a href="global.html#getCart">getCart</a></li><li><a href="global.html#getCartItemCount">getCartItemCount</a></li><li><a href="global.html#getCartStorageKey">getCartStorageKey</a></li><li><a href="global.html#getCurrentUser">getCurrentUser</a></li><li><a href="global.html#getLatestUpdate">getLatestUpdate</a></li><li><a href="global.html#getNotificationLogs">getNotificationLogs</a></li><li><a href="global.html#getNotificationTokensForOrder">getNotificationTokensForOrder</a></li><li><a href="global.html#getProductByKey">getProductByKey</a></li><li><a href="global.html#getProductsByCategory">getProductsByCategory</a></li><li><a href="global.html#getProductsByUser">getProductsByUser</a></li><li><a href="global.html#getSalesMovement">getSalesMovement</a></li><li><a href="global.html#getUniqueSellerKeys">getUniqueSellerKeys</a></li><li><a href="global.html#getUserByPhone">getUserByPhone</a></li><li><a href="global.html#getUserPurchases">getUserPurchases</a></li><li><a href="global.html#goToSlide">goToSlide</a></li><li><a href="global.html#handleAccountDeletion">handleAccountDeletion</a></li><li><a href="global.html#handleCheckout">handleCheckout</a></li><li><a href="global.html#handleGuestLogin">handleGuestLogin</a></li><li><a href="global.html#handleLoginSuccess">handleLoginSuccess</a></li><li><a href="global.html#handleNewNotification">handleNewNotification</a></li><li><a href="global.html#handleRevokedPermissions">handleRevokedPermissions</a></li><li><a href="global.html#hideText">hideText</a></li><li><a href="global.html#initAdverModule">initAdverModule</a></li><li><a href="global.html#initDB">initDB</a></li><li><a href="global.html#initSearchModal">initSearchModal</a></li><li><a href="global.html#initializeAdminPanel">initializeAdminPanel</a></li><li><a href="global.html#initializeNotifications">initializeNotifications</a></li><li><a href="global.html#initializeUsersAdminLogic">initializeUsersAdminLogic</a></li><li><a href="global.html#isConnectedCache">isConnectedCache</a></li><li><a href="global.html#isUserAdmin">isUserAdmin</a></li><li><a href="global.html#isUserEligibleForNotifications">isUserEligibleForNotifications</a></li><li><a href="global.html#isUserSeller">isUserSeller</a></li><li><a href="global.html#lastConnectionCheck">lastConnectionCheck</a></li><li><a href="global.html#loadAndShowModal">loadAndShowModal</a></li><li><a href="global.html#loadCategories">loadCategories</a></li><li><a href="global.html#loadCategoryFilters">loadCategoryFilters</a></li><li><a href="global.html#loadPageContent">loadPageContent</a></li><li><a href="global.html#loadUsersTable">loadUsersTable</a></li><li><a href="global.html#logout">logout</a></li><li><a href="global.html#normalizeArabicText">normalizeArabicText</a></li><li><a href="global.html#normalizeDigits">normalizeDigits</a></li><li><a href="global.html#offlineToast">offlineToast</a></li><li><a href="global.html#pauseAutoPlay">pauseAutoPlay</a></li><li><a href="global.html#performActualConnectionCheck">performActualConnectionCheck</a></li><li><a href="global.html#performSearch">performSearch</a></li><li><a href="global.html#populateProductDetails">populateProductDetails</a></li><li><a href="global.html#removeFromCart">removeFromCart</a></li><li><a href="global.html#resetAutoPlay">resetAutoPlay</a></li><li><a href="global.html#saveCart">saveCart</a></li><li><a href="global.html#saveNotificationFromAndroid">saveNotificationFromAndroid</a></li><li><a href="global.html#sendNotification">sendNotification</a></li><li><a href="global.html#sendTokenToServer">sendTokenToServer</a></li><li><a href="global.html#setupFCM">setupFCM</a></li><li><a href="global.html#setupModalLogic">setupModalLogic</a></li><li><a href="global.html#showAddProductModal">showAddProductModal</a></li><li><a href="global.html#showAdvertiesmentModal">showAdvertiesmentModal</a></li><li><a href="global.html#showCartModal">showCartModal</a></li><li><a href="global.html#showEditProductModal">showEditProductModal</a></li><li><a href="global.html#showEditProfileModal">showEditProfileModal</a></li><li><a href="global.html#showError">showError</a></li><li><a href="global.html#showFinalText">showFinalText</a></li><li><a href="global.html#showMyProducts">showMyProducts</a></li><li><a href="global.html#showNotificationsLogModal">showNotificationsLogModal</a></li><li><a href="global.html#showNotificationsModal">showNotificationsModal</a></li><li><a href="global.html#showProductDetails">showProductDetails</a></li><li><a href="global.html#showPurchasesModal">showPurchasesModal</a></li><li><a href="global.html#showSalesMovementModal">showSalesMovementModal</a></li><li><a href="global.html#showTextWithZoom">showTextWithZoom</a></li><li><a href="global.html#showUsersAdminModal">showUsersAdminModal</a></li><li><a href="global.html#startAnimationCycle">startAnimationCycle</a></li><li><a href="global.html#startAutoPlay">startAutoPlay</a></li><li><a href="global.html#startPeriodicConnectionCheck">startPeriodicConnectionCheck</a></li><li><a href="global.html#startTaglineCarousel">startTaglineCarousel</a></li><li><a href="global.html#updateCartBadge">updateCartBadge</a></li><li><a href="global.html#updateCartQuantity">updateCartQuantity</a></li><li><a href="global.html#updateOrderStatus">updateOrderStatus</a></li><li><a href="global.html#updateProduct">updateProduct</a></li><li><a href="global.html#updateUser">updateUser</a></li><li><a href="global.html#updateUsers">updateUsers</a></li><li><a href="global.html#updateViewForLoggedInUser">updateViewForLoggedInUser</a></li><li><a href="global.html#verifyUserPassword">verifyUserPassword</a></li><li><a href="global.html#waitForFcmKey">waitForFcmKey</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.5</a> on Sat Nov 22 2025 02:55:09 GMT+0200 (Eastern European Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
